<!DOCTYPE html>
<html lang="en">

<head>
    <title>ex3</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <script src="../libs/threejs/three.min.js"></script>
    <!--<script src="../../libs/gbox3d/gl-matrix-min.js"></script>-->
    <!--<script src="../../libs/gbox3d/gl-matics.js"></script>-->
    <script src="https://gbox3d.github.io/opencvJsTutorial/libs//opencv.js"></script>


</head>

<body>

    <div>
        <canvas id="mainCanvas" width="512" height="512"> </canvas>
    </div>
    
    <script>

        //https://docs.opencv.org/3.4/df/d24/tutorial_js_image_display.html
        

        var mainCanvas = document.getElementById('mainCanvas');
        // instantiate a loader
        var loader = new THREE.ImageLoader();

        // load a image resource
        loader.load(
            // resource URL
            '../res/mina.png',
            // onLoad callback
            function (image) {
                // use the image, e.g. draw part of it on a canvas
                let canvas = mainCanvas;
                let context = canvas.getContext('2d');

                let src = cv.imread(image);
                let dst = new cv.Mat();
                cv.cvtColor(src, dst, cv.COLOR_RGBA2GRAY);
                cv.imshow(mainCanvas, dst);

                src.delete();
                dst.delete();
            },

            // onProgress callback currently not supported
            undefined,

            // onError callback
            function () {
                console.error('An error happened.');
            }
        );
    </script>

</body>

</html>